var HBUsePageContents=!1,gServer="kanachat.delta.com",gUseDynamicStartPage=!1,gDSPLauncherPageName="/utils/shared/components/responseLiveLauncher.html",gChatWindowWidth=300,gChatWindowHeight=500,gChatWindowProperties="width="+gChatWindowWidth+",height="+gChatWindowHeight+",menubar=no,location=no,directories=no,status=no,toolbar=no,scrollbars=auto,resizable=yes,screenX=10,screenY=10,left=10,top=10",gHTTP="http://",gHTTPS="https://",gChatLaunchWindow=null;function startChat(e,n,t,a,i,o){launchChat(e,n,t,a,i,o,"CHAT_ONLY")}function startChatAndCobrowse(e,n,t,a,i,o){launchChat(e,n,t,a,i,o,"COBROWSE")}function startChatWithEscalation(e,n,t,a,i,o){launchChat(e,n,t,a,i,o,"COBROWSE_ESCALATION")}function launchChat(e,n,t,a,i,o,r){if(alreadyChatting()){alert("You are already in a session.");var d=getChatWindow();null==d||d.closed||d.focus()}else openInitialWindow(),finishLaunchingChat(e,n,t,a,i,o,r)}function finishLaunchingChat(e,n,t,a,i,o,r){var d=getChatWindow();saveChatParamaters(d,e,n,t,a,i,o,r),alreadyConavigating()?handleRecursiveLaunch(e,n,d):browserDoesNotSupportDOM2()||isIEonMac()?handleUnsupportedBrowser(e,n,d):"https:"==window.location.protocol?createAndSubmitForm():checkSSLEnabledAndSubmit(e,n)}function createAndSubmitForm(){var e=getChatWindow(),n=createForm(e.serverName,e);addFormField(n,e,"CHAT_WINDOW_WIDTH",gChatWindowWidth),addFormField(n,e,"CHAT_WINDOW_PROPERTIES",gChatWindowProperties),addFormField(n,e,"ICHANNEL_ID",e.iChannel),addFormField(n,e,"ATTACHED_DATA",e.attachedData),addFormField(n,e,"ENTER_ON_QUEUE_PAGE",e.enterOnQueuePage),addFormField(n,e,"CHAT_LAUNCH_MODE",e.chatLaunchMode),addFormField(n,e,"AGENT_VISIBLE_DATA",createAgentVisibleDataString(e.agentOnlyValues)),addFormField(n,e,"REFERRER_URL",window.location.href),void 0!==gUseDynamicStartPage&&gUseDynamicStartPage&&addFormField(n,e,"DSP_LAUNCHER_PAGE_NAME",gDSPLauncherPageName);var t=e.prefillValues;for(prefillItem in t)addFormField(n,e,prefillItem,t[prefillItem]);n.submit()}var gKanaLiveDebug=!1;function openInitialWindow(){var e=window.open("",getChatWindowName(),getWinProperties());try{e.document.write("<html><body></body></html>"),e.document.close()}catch(e){gKanaLiveDebug&&alert(e)}setChatWindow(e)}function createForm(e,n){var t=n.document.createElement("form");return t.method="post",t.target="_self",t.action=gHTTPS+e+"/CONAV/CHAT/ChatPreLaunch",n.document.body.appendChild(t),t}var DATA_SEPARATOR="_HB_";function createAgentVisibleDataString(e){var n="";for(agentItem in e)isNonEmptyString(n)&&(n+=DATA_SEPARATOR),n+=agentItem+DATA_SEPARATOR+e[agentItem];return n}function addFormField(e,n,t,a){if(isNonEmptyString(t)&&isNonEmptyString(a)){var i=n.document.createElement("input");i.type="hidden",i.name=t,i.value=a,e.appendChild(i)}}function alreadyChatting(){var e=document.cookie;return checkChatWindowExists()||isNonEmptyString(e)&&-1<e.indexOf("hbuidv23=")}function checkChatWindowExists(){var e=getChatWindow();return null!=e&&!e.closed}function alreadyConavigating(){return"undefined"!=typeof isHipboneSharedWindow}function handleRecursiveLaunch(e,n,t){t.location.href=gHTTPS+n+"/CONAV/chat/errorpages/recursiveConav.jsp?ICHANNEL_ID="+e}function browserDoesNotSupportDOM2(){return null==document.getElementById}function handleUnsupportedBrowser(e,n,t){t.location.href=gHTTPS+n+"/CONAV/CHAT/ChatPreLaunch?ICHANNEL_ID="+e}function checkSSLEnabledAndSubmit(e,n){createAndSubmitForm();var t=new Image(1,1);t.onerror=function(){handleChatNoSSL(e,n)},t.src=gHTTPS+n+"/CONAV/HTD/Default/shared/images/blank.gif?time="+(new Date).getTime()}function handleChatNoSSL(e,n){var t=gHTTP+n+"/CONAV/chat/errorpages/sslDisabled.jsp?ICHANNEL_ID="+e;window.open(t,getChatWindowName(),getWinProperties()),getChatWindow().close()}function saveChatParamaters(e,n,t,a,i,o,r,d){e.iChannel=n,e.serverName=t,e.attachedData=a,e.prefillValues=i,e.agentOnlyValues=o,e.enterOnQueuePage=r,e.chatLaunchMode=d}function setChatWindow(e){window.gChatLaunchWindow=e}function getChatWindow(){return window.gChatLaunchWindow}function getChatWindowName(){return"_blank"}function getWinProperties(){return gChatWindowProperties}function isIE(){return-1!=navigator.userAgent.toLowerCase().indexOf("msie")}function isMac(){return-1!=navigator.userAgent.toLowerCase().indexOf("mac")}function isIEonMac(){return isIE()&&isMac()}function isNonEmptyString(e){return null!=e&&""!=e}function goToAfterLaunchUrl(){void 0!==window.gAfterLaunchURL&&(window.location.href=window.gAfterLaunchURL)}