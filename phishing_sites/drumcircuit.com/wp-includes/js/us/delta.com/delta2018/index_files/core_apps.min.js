var isHomePage=!1,delta=delta||{};delta.breadcrumbBuilder={hierarchy:null,cUrl:null,isPageFound:!1,isCustLoggedin:!1,breadcrumb:[],templateData:[],createBreadcrumb:function(){var e,r;this.breadcrumb.reverse();try{void 0!==this.breadcrumb[0]&&(this.breadcrumb[0].length=1)}catch(e){return void delta.utils.logger.logMessage("Caught Error: "+e,"error")}for(var t=0;t<this.breadcrumb.length;t++){for(var i=0;i<this.breadcrumb[t].length;i++)0==i?(this.breadcrumb[t][i].id=this.breadcrumb[t][i].id+"_top",(e=this.createTmpNode(this.breadcrumb[t][i])).children=[]):(r=this.createTmpNode(this.breadcrumb[t][i]),e.children.push(r));0==e.children.length&&(e.children=null),this.templateData.push(e)}},createTmpNode:function(e){var r={};return r.pageName=e.pageName,r.pageLink=e.pageLink,r.id=e.id,r.useFormPost=e.useFormPost,r.formId=e.formId,r.showChildren=e.showChildren,null!=e.isEnd?r.isEnd=e.isEnd:r.isEnd=!1,r},findPage:function(e){var r=[],t={};if(this.isCurrentPage(e)){if(this.isPageFound=!0,(t=this.createTmpNode(e)).id=t.id+"_current",0==e.children.length?t.isEnd=!0:t.isEnd=!1,r.push(t),0<e.children.length)for(var i=0;i<e.children.length;i++)this.willAddToBreadcrumbPath(e.children[i])&&r.push(this.createTmpNode(e.children[i]));this.breadcrumb.push(r)}else{if(0<e.children.length)for(i=0;i<e.children.length;i++)this.isCustLoggedin!=e.children[i].loggedIn||this.isPageFound||this.findPage(e.children[i]);if(this.isPageFound){t=this.createTmpNode(e),r.push(t);var a=e.children;for(i=0;i<a.length;i++)this.willAddToBreadcrumbPath(a[i])&&r.push(this.createTmpNode(a[i]));this.breadcrumb.push(r)}else;}},getBreadcrumbPath:function(){var e=this.hierarchy[0];this.findPage(e)},isCurrentPage:function(e){return!(!this.cUrl.match(e.path)||"Home"==e.pageName||this.isCustLoggedin!=e.loggedIn)},init:function(e){null!=CustomerInfo.isLoggedIn()&&"undefined"!=CustomerInfo.isLoggedIn()&&(this.isCustLoggedin=CustomerInfo.isLoggedIn()),this.hierarchy=e,this.cUrl=window.location.pathname,this.getBreadcrumbPath(),this.createBreadcrumb(),this.renderBreadcrumb(),DeltaUtils.exists($("#InteractiveBreadcrumbNavigation ul li"))&&0==$("#InteractiveBreadcrumbNavigation ul li").length&&$("#InteractiveBreadcrumbNavigation").remove()},renderBreadcrumb:function(){DeltaUtils.exists($("#InteractiveBreadcrumbNavigation ul li"))&&0<$("#InteractiveBreadcrumbNavigation ul li").length&&$("#_deltaDropDownMenu_tmplHolder li").remove(),ractive=new Ractive({el:"#_deltaDropDownMenu_tmplHolder",template:"#_breadcrumb_tmpl2",data:{items:delta.breadcrumbBuilder.templateData}}),$("#_deltaDropDownMenu_tmplHolder li").first().addClass("alpha"),$("#_deltaDropDownMenu_tmplHolder li").first().removeAttr("aria-haspopup"),$("#_deltaDropDownMenu_tmplHolder .breadcrumbDividerStyle").last().remove(),$("#_deltaDropDownMenu_tmplHolder li").each(function(){0==$(this).has("ul").length?($(this).css("backgroundImage","none"),$(this).css("paddingRight","10px"),$(this).removeAttr("aria-haspopup")):$(this).find("div.breadcrumbLinkContainer").children("a").attr("aria-expanded",!1)});var e=$("#_deltaDropDownMenu_tmplHolder li").last();0==e.has("ul").length&&(e.removeAttr("style").addClass("breadcrumblastchild"),e.unbind())},willAddToBreadcrumbPath:function(e){if(e.hasOwnProperty("millionMiler")){if(this.isCurrentPage(e)&&!e.loggedIn)return!0;if(CustomerInfo.getMillionMiler()!=e.millionMiler)return!1}return!0}};